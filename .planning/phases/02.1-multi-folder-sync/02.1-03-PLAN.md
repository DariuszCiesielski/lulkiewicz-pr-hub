---
phase: 02.1-multi-folder-sync
plan: 03
type: execute
wave: 2
depends_on: ["02.1-01", "02.1-02"]
files_modified:
  - src/components/threads/ThreadList.tsx
  - src/app/(hub)/email-analyzer/mailboxes/page.tsx
  - src/components/email/MailboxList.tsx
  - src/app/(hub)/fb-analyzer/groups/page.tsx
  - src/components/fb/SettingsForm.tsx
  - src/components/fb/GroupFormModal.tsx
  - src/components/fb/GroupTable.tsx
  - src/components/fb/BulkActionToolbar.tsx
  - src/components/fb/GroupBulkUpload.tsx
autonomous: true

must_haves:
  truths:
    - "ThreadList.tsx zawiera legendę statusów z opisami Oczekujący/Otwarty/Zamknięty"
    - "Żaden plik UI nie zawiera polskich słów bez znaków diakrytycznych (ą,ę,ó,ś,ć,ź,ż,ł,ń)"
  artifacts:
    - path: "src/components/threads/ThreadList.tsx"
      provides: "Legenda statusów wątków"
      contains: "Oczekujący"
---

<objective>
UI improvements: legenda statusów wątków + poprawka 47 miejsc z brakującymi polskimi znakami diakrytycznymi w 8 plikach.

Purpose: Użytkownik rozumie co oznaczają statusy wątków. Interfejs jest poprawny językowo.
Output: Legenda w ThreadList.tsx + poprawki polskich znaków w 8 plikach.
</objective>

<execution_context>
@C:\Users\dariu\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\dariu\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/phases/02.1-multi-folder-sync/02.1-CONTEXT.md
@src/components/threads/ThreadList.tsx
@src/components/threads/ThreadCard.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Legenda statusów wątków</name>
  <files>src/components/threads/ThreadList.tsx</files>
  <action>
Dodaj komponent legendy statusów NAD listą wątków (przed `{threads.map(...)}`), ale PO sprawdzeniu `threads.length === 0`.

Legenda powinna być zwijalna (domyślnie zwinięta) i zawierać:

```tsx
import { useState } from 'react'; // dodaj do istniejących importów
import { Info, ChevronDown, ChevronUp } from 'lucide-react'; // dodaj do importów

// Wewnątrz komponentu, przed return threads.map:
const [showLegend, setShowLegend] = useState(false);

// W JSX, przed listą wątków:
<div className="mb-3">
  <button
    onClick={() => setShowLegend(!showLegend)}
    className="flex items-center gap-1.5 text-xs transition-colors hover:opacity-80"
    style={{ color: 'var(--text-muted)' }}
  >
    <Info className="h-3.5 w-3.5" />
    Legenda statusów
    {showLegend ? <ChevronUp className="h-3 w-3" /> : <ChevronDown className="h-3 w-3" />}
  </button>

  {showLegend && (
    <div
      className="mt-2 rounded-md border p-3 text-xs space-y-1.5"
      style={{
        borderColor: 'var(--border-primary)',
        backgroundColor: 'var(--bg-secondary)',
        color: 'var(--text-secondary)',
      }}
    >
      <div className="flex items-center gap-2">
        <span className="inline-block rounded-full px-2 py-0.5 text-xs font-medium"
          style={{ backgroundColor: 'rgba(234, 179, 8, 0.15)', color: '#eab308' }}>
          Oczekujący
        </span>
        <span>Ostatnia wiadomość od osoby zewnętrznej — czeka na odpowiedź administracji</span>
      </div>
      <div className="flex items-center gap-2">
        <span className="inline-block rounded-full px-2 py-0.5 text-xs font-medium"
          style={{ backgroundColor: 'rgba(34, 197, 94, 0.15)', color: '#22c55e' }}>
          Otwarty
        </span>
        <span>Ostatnia wiadomość od administracji — sprawa w toku</span>
      </div>
      <div className="flex items-center gap-2">
        <span className="inline-block rounded-full px-2 py-0.5 text-xs font-medium"
          style={{ backgroundColor: 'rgba(107, 114, 128, 0.15)', color: '#6b7280' }}>
          Zamknięty
        </span>
        <span>Wątek oznaczony jako zamknięty</span>
      </div>
    </div>
  )}
</div>
```

Użyj tych samych kolorów co w `ThreadCard.tsx` (`STATUS_STYLES`).
  </action>
  <verify>
Legenda renderuje się poprawnie. Kolory badge'ów zgadzają się z ThreadCard.
  </verify>
  <done>Legenda statusów dodana do ThreadList.tsx — zwijalna, z kolorowymi badge'ami i opisami.</done>
</task>

<task type="auto">
  <name>Task 2: Polskie znaki — src/app/(hub)/email-analyzer/mailboxes/page.tsx</name>
  <files>src/app/(hub)/email-analyzer/mailboxes/page.tsx</files>
  <action>
Popraw 8 miejsc z brakującymi polskimi znakami:

1. `'Nie udalo sie pobrac skrzynek'` → `'Nie udało się pobrać skrzynek'`
2. `'Nie udalo sie dodac skrzynki'` → `'Nie udało się dodać skrzynki'`
3. `'Nie udalo sie usunac skrzynki'` → `'Nie udało się usunąć skrzynki'`
4. `Ladowanie...` → `Ładowanie...`
5. `Zarzadzanie skrzynkami` → `Zarządzanie skrzynkami`
6. `Odswiez` → `Odśwież`
7. `Dodaj skrzynke` → `Dodaj skrzynkę`
8. `Ladowanie skrzynek...` → `Ładowanie skrzynek...`

Użyj search-and-replace w pliku. Sprawdź każdą zamianę.
  </action>
  <verify>Żaden tekst w pliku nie zawiera polskich słów bez diakrytyków. Grep po typowych wzorcach: `udalo`, `ladowanie`, `skrzynke`, `Odswiez`.</verify>
  <done>8 poprawek polskich znaków w mailboxes/page.tsx.</done>
</task>

<task type="auto">
  <name>Task 3: Polskie znaki — src/components/email/MailboxList.tsx</name>
  <files>src/components/email/MailboxList.tsx</files>
  <action>
Popraw 7 miejsc:

1. `Dodaj pierwsza skrzynke aby rozpoczac.` → `Dodaj pierwszą skrzynkę aby rozpocząć.`
2. `'Blad polaczenia z serwerem'` → `'Błąd połączenia z serwerem'`
3. `Czy na pewno chcesz usunac skrzynke` → `Czy na pewno chcesz usunąć skrzynkę`
4. `Ta operacja jest nieodwracalna.` → bez zmian (poprawne)
5. `wiadomosci` → `wiadomości`
6. `title="Edytuj skrzynke"` → `title="Edytuj skrzynkę"`
7. `title="Testuj polaczenie"` → `title="Testuj połączenie"`
  </action>
  <verify>Grep po `skrzynke`, `polaczenia`, `wiadomosci`, `Blad`, `usunac`, `rozpoczac` — zero wyników.</verify>
  <done>7 poprawek polskich znaków w MailboxList.tsx.</done>
</task>

<task type="auto">
  <name>Task 4: Polskie znaki — src/app/(hub)/fb-analyzer/groups/page.tsx</name>
  <files>src/app/(hub)/fb-analyzer/groups/page.tsx</files>
  <action>
Popraw 10 miejsc:

1. `Blad pobierania grup` → `Błąd pobierania grup`
2. `Blad pobierania deweloperow` → `Błąd pobierania deweloperów`
3. `'Wystapil blad'` → `'Wystąpił błąd'`
4. `'Blad dodawania grupy'` → `'Błąd dodawania grupy'`
5. `'Blad edycji grupy'` → `'Błąd edycji grupy'`
6. `Czy na pewno chcesz usunac grupe` → `Czy na pewno chcesz usunąć grupę`
7. `'Blad usuwania grupy'` → `'Błąd usuwania grupy'`
8. `'Blad zmiany statusu'` → `'Błąd zmiany statusu'`
9. `'Blad operacji masowej'` → `'Błąd operacji masowej'`
10. `Dodaj grupe` → `Dodaj grupę`
  </action>
  <verify>Grep po `Blad`, `Wystapil`, `usunac`, `grupe`, `deweloperow` — zero wyników.</verify>
  <done>10 poprawek polskich znaków w fb-analyzer groups page.</done>
</task>

<task type="auto">
  <name>Task 5: Polskie znaki — src/components/fb/SettingsForm.tsx</name>
  <files>src/components/fb/SettingsForm.tsx</files>
  <action>
Popraw 10 miejsc:

1. `'Blad ladowania ustawien'` → `'Błąd ładowania ustawień'` (występuje 2x)
2. `'Blad ladowania deweloperow'` → `'Błąd ładowania deweloperów'`
3. `'Blad zapisu'` → `'Błąd zapisu'` (występuje 2x)
4. `'Blad odczytu pliku'` → `'Błąd odczytu pliku'`
5. `Ladowanie ustawien...` → `Ładowanie ustawień...`
6. `Domyslne instrukcje AI` → `Domyślne instrukcje AI`
7. `Dodaj grupy z deweloperem aby ustawic domyslne instrukcje` → `Dodaj grupy z deweloperem aby ustawić domyślne instrukcje`
8. `Opisz co AI ma szukac w postach grup tego dewelopera...` → `Opisz co AI ma szukać w postach grup tego dewelopera...`

Użyj replace_all tam gdzie tekst powtarza się identycznie.
  </action>
  <verify>Grep po `Blad`, `ladowania`, `Domyslne`, `ustawic`, `szukac` — zero wyników.</verify>
  <done>10 poprawek polskich znaków w SettingsForm.tsx.</done>
</task>

<task type="auto">
  <name>Task 6: Polskie znaki — pozostałe 3 pliki FB</name>
  <files>src/components/fb/GroupFormModal.tsx, src/components/fb/GroupTable.tsx, src/components/fb/BulkActionToolbar.tsx, src/components/fb/GroupBulkUpload.tsx</files>
  <action>
**GroupFormModal.tsx** (4 miejsca):
1. `'Wystapil blad'` → `'Wystąpił błąd'`
2. `Edytuj grupe` → `Edytuj grupę`
3. `Opisz co AI ma szukac w postach tej grupy...` → `Opisz co AI ma szukać w postach tej grupy...`
4. `Dodaj grupe` → `Dodaj grupę`

**GroupTable.tsx** (3 miejsca):
1. `Brak grup do wyswietlenia. Dodaj pierwsza grupe.` → `Brak grup do wyświetlenia. Dodaj pierwszą grupę.`
2. `{/* Naglowek sekcji dewelopera */}` → `{/* Nagłówek sekcji dewelopera */}`
3. `title="Usun"` → `title="Usuń"`

**BulkActionToolbar.tsx** (3 miejsca):
1. `Zmien dewelopera` → `Zmień dewelopera`
2. `Czy na pewno chcesz usunac ${selectedCount} zaznaczonych grup?` → `Czy na pewno chcesz usunąć ${selectedCount} zaznaczonych grup?`
3. `Usun` → `Usuń`

**GroupBulkUpload.tsx** (2 miejsca):
1. `'Blad dodawania grup'` → `'Błąd dodawania grup'`
2. `'Wystapil blad'` → `'Wystąpił błąd'`
  </action>
  <verify>
Finalny grep po WSZYSTKICH plikach src/ po wzorcach bez diakrytyków:
`rg -i "Blad |udalo|ladowanie|skrzynke|Odswiez|wiadomosci|polaczeni|Wystapil|usunac|grupe |deweloperow|szukac|Domyslne|wyswietleni|Naglowek|Zmien " src/`
Oczekiwany wynik: zero dopasowań (lub tylko w komentarzach/zmiennych nie-UI).
  </verify>
  <done>12 poprawek polskich znaków w 4 plikach FB components.</done>
</task>

</tasks>

<verification>
- [ ] ThreadList.tsx zawiera legendę statusów (zwijalna, 3 statusy z opisami)
- [ ] Kolory legendy zgadzają się z ThreadCard STATUS_STYLES
- [ ] Brak polskich słów bez diakrytyków w ŻADNYM z 8 plików UI
- [ ] `npx tsc --noEmit` przechodzi bez błędów
- [ ] Grep po typowych wzorcach (Blad, udalo, skrzynke, wiadomosci) — zero wyników w src/
</verification>

<success_criteria>
1. Legenda statusów widoczna i czytelna na stronie wątków
2. Wszystkie 47 miejsc z brakującymi polskimi znakami poprawione
3. Kompilacja TypeScript bez błędów
</success_criteria>

<output>
After completion, create `.planning/phases/02.1-multi-folder-sync/02.1-03-SUMMARY.md`
</output>
