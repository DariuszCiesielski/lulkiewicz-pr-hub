# Handoff — 2026-02-12 (sesja 3)

## Gdzie skończyliśmy

**GSD new-milestone flow dla v1.1 FB Analyzer** — w trakcie Phase 9 (Create Roadmap).

### Ukończone kroki:
1. Research (4 agentów równolegle) — DONE, committed
2. Requirements definition (33 wymagania, 6 kategorii) — DONE, committed (9a219dd)
3. **Roadmap creation — DO ZROBIENIA** (następny krok)

### Co zostało:
1. **Spawn gsd-roadmapper** — stworzy ROADMAP.md z fazami 7+ (kontynuacja numeracji z v1.0)
2. **User approval** roadmapy
3. **Commit** roadmapy
4. **Przejście do `/gsd:plan-phase 7`**

---

## Instrukcja dla nowego agenta

### Krok 1: Stwórz roadmapę

Spawn `gsd-roadmapper` (model: opus) z kontekstem:
- Czytaj: `.planning/PROJECT.md`, `.planning/REQUIREMENTS.md`, `.planning/ROADMAP.md`, `.planning/STATE.md`
- Czytaj: `.planning/research-v1.1/SUMMARY.md`
- Czytaj: `C:\Users\dariu\.claude\plans\lexical-marinating-blossom.md` (plan architektoniczny)

**Instrukcje dla roadmappera:**
- Fazy zaczynają się od **Phase 7** (v1.0 = fazy 1-6)
- **APPEND** nowe fazy do istniejącego ROADMAP.md (nie nadpisuj faz 1-6)
- Mapuj wszystkie 33 wymagań v1.1 (FBNAV, FBGRP, FBSCR, FBAI, FBVIEW, FBREP)
- Zaktualizuj traceability w REQUIREMENTS.md
- Zaktualizuj STATE.md

### Krok 2: Pokaż roadmapę userowi i poproś o approval

### Krok 3: Commit i pokaż next step (`/gsd:plan-phase 7`)

---

## Kluczowe decyzje z tej sesji

### Wizja użytkownika (NIE ZMIENIAJ):
1. **Cel**: Automatyczne monitorowanie grup FB osiedli → wykrywanie opinii o administracji/deweloperze → raport z linkami
2. **User widzi TYLKO istotne posty** (AI-flagowane), NIE wszystkie posty
3. **Raport = wzbogacony**: sekcje per grupa + podsumowanie AI + tabela wpisów z **linkami do postów FB**
4. **Link do postu** jest krytyczny — user musi kliknąć i ręcznie odpowiedzieć na FB
5. **ZERO publikowania/odpowiadania** z poziomu narzędzia — read-only monitoring
6. **AI prompt**: domyślny + edytowalny przez admina
7. **Konfiguracja per klient**: słowa kluczowe + prompt AI (per grupa lub globalnie)
8. **Raport na żądanie** (nie automatycznie po scrapie)
9. **Ochrona konta FB** to priorytet — dedykowane konto, Apify Proxy, rate limiting, cookie health check

### Hierarchia biznesowa:
- Agencja PR (Lulkiewicz) → obsługuje deweloperów → deweloperzy mają osiedla → mieszkańcy tworzą grupy FB
- Pole `developer` w fb_groups grupuje grupy per deweloper

### Research findings:
- ZERO nowych npm dependencies (natywny fetch do Apify, reuse callAI, encrypt, docx)
- Sentiment przechowywany bezpośrednio na fb_posts (nie osobna tabela)
- Admin utilities (verifyAdmin/getAdminClient) warto wyekstrahować do shared module
- Phase 3 (Scraping) = najwyższe ryzyko — Apify Actor API wymaga walidacji
- Dwufazowa architektura scrapowania (start run → poll → fetch) bo Apify runs trwają minuty

---

## Wymagania v1.1 (33 total, 6 kategorii)

| Kategoria | Count | REQ-IDs |
|-----------|-------|---------|
| Fundament & Nawigacja | 6 | FBNAV-01..06 |
| Zarządzanie Grupami | 4 | FBGRP-01..04 |
| Scrapowanie | 7 | FBSCR-01..07 |
| Analiza AI | 6 | FBAI-01..06 |
| Widok Istotnych Postów | 4 | FBVIEW-01..04 |
| Raportowanie | 6 | FBREP-01..06 |

Pełna lista w `.planning/REQUIREMENTS.md` (commit 9a219dd).

---

## Sugerowana struktura faz (z researchu)

| Phase | Nazwa | Wymagania | Ryzyko |
|-------|-------|-----------|--------|
| 7 | Fundament (DB + Types + Nav) | FBNAV-01..06 | Niskie |
| 8 | Grupy CRUD | FBGRP-01..04 | Niskie |
| 9 | Scraping Apify | FBSCR-01..07 | **WYSOKIE** |
| 10 | Analiza AI | FBAI-01..06 | Średnie |
| 11 | Widok Postów | FBVIEW-01..04 | Niskie |
| 12 | Raportowanie + DOCX | FBREP-01..06 | Niskie |

Roadmapper może zmienić tę strukturę — to sugestia z researchu.

---

## Pliki

| Plik | Status |
|------|--------|
| `.planning/PROJECT.md` | Zaktualizowany dla v1.1 |
| `.planning/STATE.md` | Zaktualizowany |
| `.planning/REQUIREMENTS.md` | **33 wymagań v1.1** (committed 9a219dd) |
| `.planning/ROADMAP.md` | **DO ZAKTUALIZOWANIA** (dodaj fazy 7+) |
| `.planning/research-v1.1/` | 5 plików (STACK, FEATURES, ARCHITECTURE, PITFALLS, SUMMARY) — committed |
| `C:\Users\dariu\.claude\plans\lexical-marinating-blossom.md` | Plan architektoniczny (reference) |
| `.n8n/Grupy FB - Pozyskiwanie leadów 2.0.json` | Oryginalny workflow N8N (reference) |

---

## GSD Config

```json
{
  "mode": "yolo",
  "model_profile": "quality",
  "workflow": { "research": true, "plan_check": true, "verifier": true }
}
```

Model lookup (quality profile):
- gsd-roadmapper: **opus**
- gsd-planner: opus
- gsd-executor: opus

---

## Commity z tej sesji

| Hash | Opis |
|------|------|
| ddc5350 | docs: v1.1 research (4 agents: stack, features, architecture, pitfalls) |
| 9a219dd | docs: define milestone v1.1 FB Analyzer requirements (33 req, 6 categories) |
